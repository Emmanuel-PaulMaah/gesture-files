:root{
  --bg:#0b1020;
  --panel:rgba(255,255,255,.06);
  --panel2:rgba(255,255,255,.10);
  --text:rgba(255,255,255,.9);
  --muted:rgba(255,255,255,.65);
  --accent:rgba(120,180,255,.95);
  --danger:rgba(255,120,120,.95);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:radial-gradient(1200px 800px at 30% 10%,#18224a 0%,var(--bg) 60%);
  color:var(--text);
  overflow-x:hidden;
}
header{
  padding:14px 16px;
  display:flex;
  gap:12px;
  align-items:center;
  border-bottom:1px solid rgba(255,255,255,.08);
  position:sticky; top:0;
  background:rgba(8,12,24,.78);
  backdrop-filter:blur(10px);
  z-index:10;
}
#startBtn{
  appearance:none;
  border:1px solid rgba(255,255,255,.15);
  background:rgba(255,255,255,.06);
  color:var(--text);
  padding:10px 12px;
  border-radius:10px;
  cursor:pointer;
  font-weight:600;
}
#startBtn:hover{background:rgba(255,255,255,.09)}
#status{
  font-size:14px;
  color:var(--muted);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.small{
  font-size:12px;
  color:var(--muted);
  margin-left:auto;
}

#wrap{
  display:grid;
  grid-template-columns:1fr;
  gap:12px;
  padding:12px 16px 16px;
}
#stage{
  position:relative;
  width:min(1100px,100%);
  margin:0 auto;
  aspect-ratio:16/9;
  border:1px solid rgba(255,255,255,.10);
  border-radius:16px;
  overflow:hidden;
  background:rgba(255,255,255,.04);
}

/* camera input (hidden) */
#webcam{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  opacity:0;
  pointer-events:none;
  transform:scaleX(-1);
}

/* interactive layer */
#desktop{
  position:absolute;
  inset:0;
  padding:18px;
}

.grid{
  display:grid;
  gap:18px;
  grid-template-columns:repeat(3,minmax(0,1fr));
  height:100%;
  align-content:start;
}

.thumb{
  position:relative;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.12);
  background:var(--panel);
  overflow:hidden;
  min-height:180px;
  user-select:none;
  transform:translateZ(0);
}
.thumb img{
  width:100%;
  height:160px;
  object-fit:cover;
  display:block;
  filter:saturate(1.05) contrast(1.03);
}
.thumb .meta{
  padding:10px 12px 12px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:8px;
}
.thumb .name{font-weight:650;font-size:14px}
.thumb .hint{font-size:12px;color:var(--muted)}

.thumb.hovered{
  outline:2px solid rgba(120,180,255,.55);
  box-shadow:0 0 0 6px rgba(120,180,255,.10);
}
.thumb.selected{
  outline:2px solid rgba(120,180,255,.85);
  box-shadow:0 0 0 8px rgba(120,180,255,.16);
}

/* viewer overlay */
#viewer{
  position:absolute;
  inset:0;
  background:rgba(10,14,28,.92);
  display:none;
  align-items:center;
  justify-content:center;
  padding:16px;
}
#viewer.visible{display:flex}
#viewerImg{
  max-width:100%;
  max-height:100%;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.12);
  box-shadow:0 18px 50px rgba(0,0,0,.45);
  object-fit:contain;
  background:rgba(255,255,255,.04);
}
#closeBtn{
  position:absolute;
  top:14px;
  right:14px;
  border:1px solid rgba(255,255,255,.20);
  background:rgba(255,255,255,.08);
  color:var(--text);
  border-radius:12px;
  padding:10px 12px;
  font-weight:800;
  letter-spacing:.3px;
  cursor:default;
  user-select:none;
}
#closeBtn.hovered{
  outline:2px solid rgba(255,120,120,.70);
  box-shadow:0 0 0 8px rgba(255,120,120,.14);
}

/* gesture cursor */
#cursor{
  position:absolute;
  width:18px;height:18px;
  border-radius:999px;
  background:rgba(120,180,255,.40);
  border:2px solid rgba(120,180,255,.95);
  transform:translate(-50%,-50%);
  pointer-events:none;
  z-index:4;
  display:none;
}
#cursor.visible{display:block}

/* overlay canvas for dots */
#overlay{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  pointer-events:none;
  z-index:5;
}

/* debug console */
details#debug{
  width:min(1100px,100%);
  margin:0 auto;
  border:1px solid rgba(255,255,255,.10);
  border-radius:12px;
  background:rgba(0,0,0,.18);
  overflow:hidden;
}
details#debug > summary{
  cursor:pointer;
  padding:10px 12px;
  color:var(--muted);
  user-select:none;
}
#logs{
  width:100%;
  display:block;
  background:rgba(0,0,0,.25);
  border:0;
  border-top:1px solid rgba(255,255,255,.08);
  color:rgba(255,255,255,.85);
  padding:10px;
  font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
  font-size:12px;
  line-height:1.35;
  min-height:160px;
  resize:vertical;
  outline:none;
}
